{"version":3,"sources":["js/backend.js"],"names":["json_link","urlParams","URLSearchParams","window","location","search","cat","get","activeFilter","console","log","objProject","name","subtitle","type","description","keywords","image","category","relatedpost","title","url","otherimages","id","wpid","project","projectsArray","currentArray","addEventListener","init","fetch","then","e","json","data","showData","forEach","dataProject","Object","create","rendered","_embedded","media_details","sizes","full","source_url","acf","categories","key","startsWith","push","table","otherimage","other_images","related_posts","indexOf","displayArray","filter","all","urlIndex","displayList","displayProject","filterByCat","byCat","toString"],"mappings":"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","file":"backend.e26912c5.map","sourceRoot":"..","sourcesContent":["\"use strict\";\n// categories = 4;\nlet json_link =\n  \"https://portfolio-backend.mathildefrachon.com/wp-json/wp/v2/projects?_embed&per_page=20\";\nlet urlParams = new URLSearchParams(window.location.search);\n\n/* THIS IS AFTER CLICKING ON A PROJECT / SUBPAGE */\nlet cat = urlParams.get(\"category\");\nlet activeFilter = cat;\nif (cat) {\n  console.log(\"array have a category : \" + cat);\n  json_link = json_link + \"&categories=\" + cat;\n}\n\n/* THIS JAVASCRIPT FETCH THE DATA AND CREATE AN ARRAY OF POSTS - FILTER THE ARRAY  */\n\n// CREATE OBJECT PROJECT\n\nconst objProject = {\n  name: \"\",\n  subtitle: \"\",\n  type: \"\",\n  description: \"\",\n  keywords: \"\",\n  image: \"\",\n  category: \"\",\n  relatedpost: {\n    title: \"\",\n    url: \"\"\n  },\n  otherimages: [],\n  id: null,\n  wpid: null\n};\n\nlet project = \"\";\nconst projectsArray = [];\nlet currentArray = [];\n\n// FETCHING\n\nwindow.addEventListener(\"DOMContentLoaded\", init);\n//ignoreHTTPSErrors: true;\n\nfunction init() {\n  // fetch JSON\n  fetch(json_link)\n    .then(e => e.json())\n    .then(data => showData(data));\n}\n\nfunction showData(data) {\n  // build the list\n  data.forEach(dataProject => {\n    // console.log(dataProject);\n    project = Object.create(objProject);\n    project.name = dataProject.title.rendered;\n    // project.id = dataProject.id;\n    project.wpid = dataProject.id;\n    project.image =\n      dataProject._embedded[\n        \"wp:featuredmedia\"\n      ][0].media_details.sizes.full.source_url;\n\n    project.subtitle = dataProject.acf.subtitle;\n    project.type = dataProject.acf.type;\n    project.description = dataProject.acf.description;\n    project.keywords = dataProject.acf.keywords;\n    project.otherimages = [];\n    project.category = dataProject.categories;\n\n    for (var key in dataProject.acf) {\n      if (key.startsWith(\"other_images\") && dataProject.acf[key]) {\n        project.otherimages.push(dataProject.acf[key]);\n      }\n    }\n    console.log(project.wpid);\n    console.table(project.otherimages);\n    project.otherimage = dataProject.acf.other_images.url; // DONT KNOW\n    project.relatedpost.title = dataProject.acf.related_posts.title;\n\n    projectsArray.push(project);\n    console.log(projectsArray);\n    project.id = projectsArray.indexOf(project);\n    // console.log(project);\n  });\n\n  currentArray = projectsArray;\n\n  // display the list\n  displayArray(currentArray);\n}\n\n// SEE IF WE ARE ON THE SUBPAGE OR NOT TO DISPLAY THE LIST OR THE PROJECT\nfunction displayArray(currentArray, filter, all) {\n  let urlParams = new URLSearchParams(window.location.search);\n\n  let urlIndex = urlParams.get(\"index\");\n\n  if (urlIndex === null) {\n    displayList(currentArray);\n    console.log(\"we are on gallery\");\n  } else {\n    displayProject(currentArray);\n    console.log(\"we are on subpage\");\n  }\n}\n\n// FILTER BY CATEGORIES\nfunction filterByCat(filter) {\n  currentArray = projectsArray.filter(byCat);\n\n  function byCat(project) {\n    if (project.category.toString() === filter.toString()) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  // console.log(currentArray + \"is array after filtering\");\n  // localStorage.setItem(\"someVarKey\", currentArray);\n  // console.log(localStorage.getItem(\"someVarKey\"));\n\n  return currentArray;\n}\n"]}